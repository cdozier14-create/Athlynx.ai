{
  "query": "\nCREATE TABLE IF NOT EXISTS `user_credits` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL UNIQUE,\n  `balance` int NOT NULL DEFAULT 0,\n  `lifetimeEarned` int NOT NULL DEFAULT 0,\n  `lifetimeSpent` int NOT NULL DEFAULT 0,\n  `monthlyAllocation` int NOT NULL DEFAULT 0,\n  `lastMonthlyReset` timestamp NULL,\n  `subscriptionTier` varchar(32),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `credit_transactions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `amount` int NOT NULL,\n  `balanceAfter` int NOT NULL,\n  `transactionType` enum('purchase','subscription','bonus','usage','refund','gift','admin') NOT NULL,\n  `description` varchar(255),\n  `featureUsed` varchar(64),\n  `referenceId` varchar(64),\n  `metadata` json,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `credit_package_purchases` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `packageId` varchar(32) NOT NULL,\n  `credits` int NOT NULL,\n  `amountPaid` decimal(10,2) NOT NULL,\n  `currency` varchar(3) NOT NULL DEFAULT 'USD',\n  `stripePaymentIntentId` varchar(64),\n  `status` enum('pending','completed','failed','refunded') NOT NULL DEFAULT 'pending',\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `stripe_customers` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL UNIQUE,\n  `stripeCustomerId` varchar(64) NOT NULL UNIQUE,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `subscriptions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `stripeSubscriptionId` varchar(64) NOT NULL UNIQUE,\n  `tierId` varchar(32) NOT NULL,\n  `tierName` varchar(64),\n  `status` enum('active','canceled','past_due','unpaid','trialing') NOT NULL DEFAULT 'active',\n  `billingCycle` enum('monthly','yearly') NOT NULL DEFAULT 'monthly',\n  `currentPeriodStart` timestamp NULL,\n  `currentPeriodEnd` timestamp NULL,\n  `cancelAtPeriodEnd` boolean NOT NULL DEFAULT false,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `payments` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `stripePaymentIntentId` varchar(64) NOT NULL UNIQUE,\n  `amount` decimal(10,2) NOT NULL,\n  `currency` varchar(3) NOT NULL DEFAULT 'USD',\n  `status` enum('pending','succeeded','failed','refunded') NOT NULL DEFAULT 'pending',\n  `paymentType` enum('subscription','one_time','credits') NOT NULL,\n  `description` varchar(255),\n  `metadata` json,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3JQAxavJTLtVSbS.e2dc57e3bd27 --database LT9iKec3A4q6ndTCS5486G --execute \nCREATE TABLE IF NOT EXISTS `user_credits` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL UNIQUE,\n  `balance` int NOT NULL DEFAULT 0,\n  `lifetimeEarned` int NOT NULL DEFAULT 0,\n  `lifetimeSpent` int NOT NULL DEFAULT 0,\n  `monthlyAllocation` int NOT NULL DEFAULT 0,\n  `lastMonthlyReset` timestamp NULL,\n  `subscriptionTier` varchar(32),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `credit_transactions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `amount` int NOT NULL,\n  `balanceAfter` int NOT NULL,\n  `transactionType` enum('purchase','subscription','bonus','usage','refund','gift','admin') NOT NULL,\n  `description` varchar(255),\n  `featureUsed` varchar(64),\n  `referenceId` varchar(64),\n  `metadata` json,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `credit_package_purchases` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `packageId` varchar(32) NOT NULL,\n  `credits` int NOT NULL,\n  `amountPaid` decimal(10,2) NOT NULL,\n  `currency` varchar(3) NOT NULL DEFAULT 'USD',\n  `stripePaymentIntentId` varchar(64),\n  `status` enum('pending','completed','failed','refunded') NOT NULL DEFAULT 'pending',\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `stripe_customers` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL UNIQUE,\n  `stripeCustomerId` varchar(64) NOT NULL UNIQUE,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `subscriptions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `stripeSubscriptionId` varchar(64) NOT NULL UNIQUE,\n  `tierId` varchar(32) NOT NULL,\n  `tierName` varchar(64),\n  `status` enum('active','canceled','past_due','unpaid','trialing') NOT NULL DEFAULT 'active',\n  `billingCycle` enum('monthly','yearly') NOT NULL DEFAULT 'monthly',\n  `currentPeriodStart` timestamp NULL,\n  `currentPeriodEnd` timestamp NULL,\n  `cancelAtPeriodEnd` boolean NOT NULL DEFAULT false,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `payments` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `stripePaymentIntentId` varchar(64) NOT NULL UNIQUE,\n  `amount` decimal(10,2) NOT NULL,\n  `currency` varchar(3) NOT NULL DEFAULT 'USD',\n  `status` enum('pending','succeeded','failed','refunded') NOT NULL DEFAULT 'pending',\n  `paymentType` enum('subscription','one_time','credits') NOT NULL,\n  `description` varchar(255),\n  `metadata` json,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY(`id`)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 832
}